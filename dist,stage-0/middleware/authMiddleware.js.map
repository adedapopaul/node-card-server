{"version":3,"sources":["../../src/middleware/authMiddleware.js"],"names":["jwt","require","expressJwt","TOKENTIME","SECRET","authenticate","secret","generateAccessToken","req","res","next","token","sign","id","user","expiresIn","console","log","respond","status","json","username","module","exports"],"mappings":";;AAAA,IAAMA,MAAMC,QAAQ,cAAR,CAAZ;AACA,IAAMC,aAAaD,QAAQ,aAAR,CAAnB;;AAEA,IAAME,YAAY,KAAG,EAAH,GAAM,EAAN,GAAS,EAA3B,C,CAA8B;AAC9B,IAAMC,SAAS,sBAAf;;AAEA,IAAIC,eAAeH,WAAW,EAAEI,QAASF,MAAX,EAAX,CAAnB;;AAEA,IAAIG,sBAAsB,SAAtBA,mBAAsB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC5CF,MAAIG,KAAJ,GAAYH,IAAIG,KAAJ,IAAa,EAAzB;AACAH,MAAIG,KAAJ,GAAYX,IAAIY,IAAJ,CAAS;AACnBC,QAAIL,IAAIM,IAAJ,CAASD;AADM,GAAT,EAETT,MAFS,EAED;AACTW,eAAWZ,SADF,CACY;AADZ,GAFC,CAAZ;AAKAa,UAAQC,GAAR,CAAYT,IAAIG,KAAhB;AACAD;AACD,CATD;;AAWA,IAAIQ,UAAU,SAAVA,OAAU,CAACV,GAAD,EAAMC,GAAN,EAAc;AAC1BA,MAAIU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBN,UAAMN,IAAIM,IAAJ,CAASO,QADI;AAEnBV,WAAOH,IAAIG;AAFQ,GAArB;AAID,CALD;;AAOAW,OAAOC,OAAP,GAAiB;AACflB,4BADe;AAEfE,0CAFe;AAGfW;AAHe,CAAjB","file":"authMiddleware.js","sourcesContent":["const jwt = require('jsonwebtoken') ;\nconst expressJwt = require('express-jwt');\n\nconst TOKENTIME = 60*60*24*30 // 30 days\nconst SECRET = \"W3 Hav3 th3 kn0w h0w\";\n\nlet authenticate = expressJwt({ secret : SECRET })\n\nlet generateAccessToken = (req, res, next) => {\n  req.token = req.token || {};\n  req.token = jwt.sign({\n    id: req.user.id,\n  }, SECRET, {\n    expiresIn: TOKENTIME // 30 days\n  });\n  console.log(req.token)\n  next();\n}\n\nlet respond = (req, res) => {\n  res.status(200).json({\n    user: req.user.username,\n    token: req.token\n  });\n}\n\nmodule.exports = {\n  authenticate,\n  generateAccessToken,\n  respond\n};\n"]}